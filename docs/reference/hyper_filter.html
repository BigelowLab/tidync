<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Subset NetCDF variable by expression — hyper_filter • tidync</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Subset NetCDF variable by expression — hyper_filter" />

<meta property="og:description" content="The hyper_filter() acts on a tidync object by matching one or more
filtering expressions like with dplyr::filter. This allows us to lazily
specify a subset from a NetCDF array without pulling  any data. The modified
object may be printed to see the effects of subsetting, or saved for further
use." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidync</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.1.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/netcdf-with-tidync.html">NetCDF with tidync</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Subset NetCDF variable by expression</h1>
    
    <div class="hidden name"><code>hyper_filter.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>The <code>hyper_filter()</code> acts on a <a href='tidync.html'>tidync</a> object by matching one or more
filtering expressions like with <code><a href='https://dplyr.tidyverse.org/reference/filter.html'>dplyr::filter</a></code>. This allows us to lazily
specify a subset from a NetCDF array without pulling  any data. The modified
object may be printed to see the effects of subsetting, or saved for further
use.</p>
    
    </div>

    <pre class="usage"><span class='fu'>hyper_filter</span>(<span class='no'>.x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for tidync</span>
<span class='fu'>hyper_filter</span>(<span class='no'>.x</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.x</th>
      <td><p>NetCDF file, connection object, or <code>tidync</code> object</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>currently ignored</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>data frame</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function <code>hyper_filter()</code> will act on an existing tidync object or a
source string.</p>
<p>Filter arguments must be named as per the dimensions in the variable in form
<code>dimname = dimname &lt; 10</code>. This is a restrictive variant of <code><a href='https://dplyr.tidyverse.org/reference/filter.html'>dplyr::filter()</a></code>,
with a syntax more like <code><a href='https://dplyr.tidyverse.org/reference/mutate.html'>dplyr::mutate()</a></code>. This ensures that each element is
named, so we know which dimension to apply this to, but also that the
expression evaluated against can do some extra work for a nuanced test.</p>
<p>There are special columns provided with each axis, one is 'index' so that
exact matching can be done by position, or to ignore the actual value of the
coordinate. That means we can use a form like <code>dimname = index &lt; 10</code> to
subset by position in the array index, without necessarily knowing the
values along that dimension.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>f</span> <span class='kw'>&lt;-</span> <span class='st'>"S20080012008031.L3m_MO_CHL_chlor_a_9km.nc"</span>
<span class='no'>l3file</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/system.file'>system.file</a></span>(<span class='st'>"extdata/oceandata"</span>, <span class='no'>f</span>, <span class='kw'>package</span><span class='kw'>=</span> <span class='st'>"tidync"</span>)
<span class='co'>## filter by value</span>
<span class='fu'><a href='tidync.html'>tidync</a></span>(<span class='no'>l3file</span>) <span class='kw'>%&gt;%</span> <span class='fu'>hyper_filter</span>(<span class='kw'>lon</span> <span class='kw'>=</span> <span class='no'>lon</span> <span class='kw'>&lt;</span> <span class='fl'>100</span>)</div><div class='output co'>#&gt; 
#&gt; Data Source (1): S20080012008031.L3m_MO_CHL_chlor_a_9km.nc ...
#&gt; 
#&gt; Grids (4) &lt;dimension family&gt; : &lt;associated variables&gt; 
#&gt; 
#&gt; [1]   D1,D0 : chlor_a    **ACTIVE GRID** ( 9331200  values per variable)
#&gt; [2]   D3,D2 : palette
#&gt; [3]   D0    : lat
#&gt; [4]   D1    : lon
#&gt; 
#&gt; Dimensions 4 (2 active): 
#&gt;   
#&gt;   dim   name  length    min   max start count   dmin  dmax unlim coord_dim 
#&gt;   <span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span>     
#&gt; </span><span style='color: #555555;'>1</span><span> D0    lat     </span><span style='text-decoration: underline;'>2</span><span>160  -</span><span style='color: #BB0000;'>90.0</span><span>  90.0     1  </span><span style='text-decoration: underline;'>2</span><span>160  -</span><span style='color: #BB0000;'>90.0</span><span>  90.0 FALSE TRUE      
#&gt; </span><span style='color: #555555;'>2</span><span> D1    lon     </span><span style='text-decoration: underline;'>4</span><span>320 -</span><span style='color: #BB0000;'>180.</span><span>  180.      1  </span><span style='text-decoration: underline;'>3</span><span>360 -</span><span style='color: #BB0000;'>180.</span><span>  100.0 FALSE TRUE      
#&gt;   
#&gt; Inactive dimensions:
#&gt;   
#&gt;   dim   name          length   min   max unlim coord_dim 
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>          </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span>     
#&gt; </span><span style='color: #555555;'>1</span><span> D2    rgb                3     1     3 FALSE FALSE     
#&gt; </span><span style='color: #555555;'>2</span><span> D3    eightbitcolor    256     1   256 FALSE FALSE     </div><div class='input'><span class='co'>## filter by index</span>
<span class='fu'><a href='tidync.html'>tidync</a></span>(<span class='no'>l3file</span>) <span class='kw'>%&gt;%</span> <span class='fu'>hyper_filter</span>(<span class='kw'>lon</span> <span class='kw'>=</span> <span class='no'>index</span> <span class='kw'>&lt;</span> <span class='fl'>100</span>)</div><div class='output co'>#&gt; 
#&gt; Data Source (1): S20080012008031.L3m_MO_CHL_chlor_a_9km.nc ...
#&gt; 
#&gt; Grids (4) &lt;dimension family&gt; : &lt;associated variables&gt; 
#&gt; 
#&gt; [1]   D1,D0 : chlor_a    **ACTIVE GRID** ( 9331200  values per variable)
#&gt; [2]   D3,D2 : palette
#&gt; [3]   D0    : lat
#&gt; [4]   D1    : lon
#&gt; 
#&gt; Dimensions 4 (2 active): 
#&gt;   
#&gt;   dim   name  length    min   max start count   dmin   dmax unlim coord_dim 
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span>     
#&gt; </span><span style='color: #555555;'>1</span><span> D0    lat     </span><span style='text-decoration: underline;'>2</span><span>160  -</span><span style='color: #BB0000;'>90.0</span><span>  90.0     1  </span><span style='text-decoration: underline;'>2</span><span>160  -</span><span style='color: #BB0000;'>90.0</span><span>   90.0 FALSE TRUE      
#&gt; </span><span style='color: #555555;'>2</span><span> D1    lon     </span><span style='text-decoration: underline;'>4</span><span>320 -</span><span style='color: #BB0000;'>180.</span><span>  180.      1    99 -</span><span style='color: #BB0000;'>180.</span><span>  -</span><span style='color: #BB0000;'>172.</span><span>  FALSE TRUE      
#&gt;   
#&gt; Inactive dimensions:
#&gt;   
#&gt;   dim   name          length   min   max unlim coord_dim 
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>          </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span>     
#&gt; </span><span style='color: #555555;'>1</span><span> D2    rgb                3     1     3 FALSE FALSE     
#&gt; </span><span style='color: #555555;'>2</span><span> D3    eightbitcolor    256     1   256 FALSE FALSE     </div><div class='input'>
<span class='co'>## be careful that multiple comparisons must occur in one expression</span>
 <span class='fu'><a href='tidync.html'>tidync</a></span>(<span class='no'>l3file</span>) <span class='kw'>%&gt;%</span> <span class='fu'>hyper_filter</span>(<span class='kw'>lon</span> <span class='kw'>=</span> <span class='no'>lon</span> <span class='kw'>&lt;</span> <span class='fl'>100</span> <span class='kw'>&amp;</span> <span class='no'>lon</span> <span class='kw'>&gt;</span> <span class='fl'>50</span>)</div><div class='output co'>#&gt; 
#&gt; Data Source (1): S20080012008031.L3m_MO_CHL_chlor_a_9km.nc ...
#&gt; 
#&gt; Grids (4) &lt;dimension family&gt; : &lt;associated variables&gt; 
#&gt; 
#&gt; [1]   D1,D0 : chlor_a    **ACTIVE GRID** ( 9331200  values per variable)
#&gt; [2]   D3,D2 : palette
#&gt; [3]   D0    : lat
#&gt; [4]   D1    : lon
#&gt; 
#&gt; Dimensions 4 (2 active): 
#&gt;   
#&gt;   dim   name  length    min   max start count  dmin  dmax unlim coord_dim 
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span>     
#&gt; </span><span style='color: #555555;'>1</span><span> D0    lat     </span><span style='text-decoration: underline;'>2</span><span>160  -</span><span style='color: #BB0000;'>90.0</span><span>  90.0     1  </span><span style='text-decoration: underline;'>2</span><span>160 -</span><span style='color: #BB0000;'>90.0</span><span>  90.0 FALSE TRUE      
#&gt; </span><span style='color: #555555;'>2</span><span> D1    lon     </span><span style='text-decoration: underline;'>4</span><span>320 -</span><span style='color: #BB0000;'>180.</span><span>  180.   </span><span style='text-decoration: underline;'>2</span><span>761   600  50.0 100.0 FALSE TRUE      
#&gt;   
#&gt; Inactive dimensions:
#&gt;   
#&gt;   dim   name          length   min   max unlim coord_dim 
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>          </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span>     
#&gt; </span><span style='color: #555555;'>1</span><span> D2    rgb                3     1     3 FALSE FALSE     
#&gt; </span><span style='color: #555555;'>2</span><span> D3    eightbitcolor    256     1   256 FALSE FALSE     </div><div class='input'>
<span class='co'>## filter in combination/s</span>
<span class='fu'><a href='tidync.html'>tidync</a></span>(<span class='no'>l3file</span>) <span class='kw'>%&gt;%</span> <span class='fu'>hyper_filter</span>(<span class='kw'>lat</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/MathFun'>abs</a></span>(<span class='no'>lat</span>) <span class='kw'>&lt;</span> <span class='fl'>10</span>, <span class='kw'>lon</span> <span class='kw'>=</span> <span class='no'>index</span> <span class='kw'>&lt;</span> <span class='fl'>100</span>)</div><div class='output co'>#&gt; 
#&gt; Data Source (1): S20080012008031.L3m_MO_CHL_chlor_a_9km.nc ...
#&gt; 
#&gt; Grids (4) &lt;dimension family&gt; : &lt;associated variables&gt; 
#&gt; 
#&gt; [1]   D1,D0 : chlor_a    **ACTIVE GRID** ( 9331200  values per variable)
#&gt; [2]   D3,D2 : palette
#&gt; [3]   D0    : lat
#&gt; [4]   D1    : lon
#&gt; 
#&gt; Dimensions 4 (2 active): 
#&gt;   
#&gt;   dim   name  length    min   max start count    dmin    dmax unlim coord_dim 
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>   </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>   </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span>     
#&gt; </span><span style='color: #555555;'>1</span><span> D0    lat     </span><span style='text-decoration: underline;'>2</span><span>160  -</span><span style='color: #BB0000;'>90.0</span><span>  90.0   961   240   -</span><span style='color: #BB0000;'>9.96</span><span>    9.96 FALSE TRUE      
#&gt; </span><span style='color: #555555;'>2</span><span> D1    lon     </span><span style='text-decoration: underline;'>4</span><span>320 -</span><span style='color: #BB0000;'>180.</span><span>  180.      1    99 -</span><span style='color: #BB0000;'>180.</span><span>   -</span><span style='color: #BB0000;'>172.</span><span>   FALSE TRUE      
#&gt;   
#&gt; Inactive dimensions:
#&gt;   
#&gt;   dim   name          length   min   max unlim coord_dim 
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>          </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span>     
#&gt; </span><span style='color: #555555;'>1</span><span> D2    rgb                3     1     3 FALSE FALSE     
#&gt; </span><span style='color: #555555;'>2</span><span> D3    eightbitcolor    256     1   256 FALSE FALSE     </div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Michael Sumner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

